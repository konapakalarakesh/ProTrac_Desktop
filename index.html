<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Amazon prod tracker</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéØ</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Plus+Jakarta+Sans:wght@400;600;700;800&family=Space+Grotesk:wght@500;700&display=swap');
        :root { --amz: #FF9900; --dark: #0F172A; --slate: #64748B; --border: #E2E8F0; --bg: #F8FAFC; --card: #FFFFFF; --text: #0F172A; }
        body.dark-mode { --bg: #020617; --card: #0F172A; --text: #F8FAFC; --border: #1E293B; --slate: #94A3B8; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--text); margin: 0; height: 100vh; overflow: hidden; transition: background 0.3s; }
        header { background: #1E293B; color: white; padding: 12px 30px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--amz); z-index: 100; position: relative; }
        .logo b { color: var(--amz); text-transform: capitalize; }
        #crazy-pop { position: fixed; inset: 0; background: rgba(15, 23, 42, 0.9); z-index: 20000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
        .pop-content { background: var(--card); padding: 40px; border-radius: 40px; text-align: center; border: 3px solid var(--amz); }
        .tabs { display: flex; gap: 5px; background: rgba(0,0,0,0.2); padding: 4px; border-radius: 10px; }
        .tab { padding: 6px 14px; border: none; border-radius: 7px; cursor: pointer; font-weight: 700; font-size: 11px; color: #94A3B8; background: transparent; }
        .tab.active { background: white !important; color: #0F172A !important; }
        .selector-bar { background: var(--card); border-bottom: 1px solid var(--border); padding: 15px 30px; }
        .chip { padding: 5px 12px; border-radius: 8px; border: 1px solid var(--border); cursor: pointer; font-size: 11px; font-weight: 600; background: var(--bg); color: var(--text); margin-right: 5px; margin-bottom: 5px; display: inline-block; }
        .chip.a-active { background: #3B82F6; color: white; border-color: #3B82F6; }
        .chip.v-active { background: #10B981; color: white; border-color: #10B981; }
        main { display: flex; gap: 25px; padding: 25px 30px; height: calc(100vh - 180px); }
        .scroll-side { flex: 1; overflow-y: auto; padding-right: 10px; }
        .sticky-side { width: 400px; position: sticky; top: 0; }
        .card { background: var(--card); border-radius: 16px; border: 1px solid var(--border); margin-bottom: 15px; }
        .card-h { padding: 10px 15px; font-weight: 800; font-size: 11px; border-bottom: 1px solid var(--border); color: var(--slate); text-transform: uppercase; background: rgba(0,0,0,0.02); }
        .magic-score { background: var(--card); border-radius: 35px; padding: 35px 20px; text-align: center; border: 1px solid var(--border); transition: 0.3s; }
        .prod-val { font-family: 'Montserrat', sans-serif; font-size: 90px; font-weight: 900; letter-spacing: -4px; line-height: 0.8; }
        #summary-ui { display: flex; flex-direction: column; padding: 30px; gap: 25px; height: calc(100vh - 80px); overflow-y: auto; }
        .summary-top { display: flex; gap: 25px; align-items: flex-start; }
        .st-container { flex: 1; }
        .st { width: 100%; border-collapse: collapse; background: var(--card); border-radius: 15px; border: 1px solid var(--border); overflow: hidden; }
        .st th { background: rgba(0,0,0,0.05); padding: 12px; font-size: 10px; color: var(--slate); text-align: left; }
        .st td { padding: 12px; border-bottom: 1px solid var(--border); font-size: 12px; color: var(--text); }
        .btn-mini { background: transparent; border: 1px solid #FCA5A5; padding: 6px; border-radius: 8px; color: #EF4444; font-size: 9px; font-weight: 800; cursor: pointer; }
        .hidden { display: none !important; }
        #name-gate { position: fixed; inset: 0; background: #0F172A; z-index: 30000; display: flex; align-items: center; justify-content: center; color: white; }
    </style>
</head>
<body>

<div id="crazy-pop" onclick="this.style.display='none'">
    <div class="pop-content">
        <div style="font-size: 60px;">‚ö°</div>
        <h1 id="pop-title" style="margin: 10px 0; font-family: 'Montserrat'; color: var(--text);"></h1>
        <p style="font-weight: 700; color: var(--slate);">CRUSH YOUR TARGETS TODAY!</p>
        <p style="font-weight: 300; color: var(--slate);">A konapaks creation</p>
    </div>
</div>

<div id="name-gate">
    <div style="text-align: center;">
        <h1 style="font-family: 'Space Grotesk'; font-size: 18px; letter-spacing: 2px;">Welcome Amazonianüëã</h1>
        <input type="text" id="user-name-in" onkeydown="if(event.key==='Enter') setName()" placeholder="Your sweet name..." style="padding:15px; border-radius:12px; border:none; width:260px; text-align:center; font-weight:700; outline:none;">
        <br><button onclick="setName()" style="margin-top:20px; padding:12px 50px; border-radius:30px; background: var(--amz); border:none; font-weight:800; cursor:pointer; color:white;">LAUNCH</button>
    </div>
</div>

<header>
    <div class="logo" id="main-logo">...</div>
    <div style="display:flex; align-items:center; gap:20px;">
        <div class="tabs" id="day-tabs"></div>
        <div id="dark-toggle" onclick="toggleDark()" style="cursor:pointer; font-size:20px;">üåì</div>
    </div>
</header>

<div class="selector-bar" id="sel-area">
    <div style="margin-bottom:8px;"><span style="font-size:10px; font-weight:800; color:var(--slate); width:110px; display:inline-block;">AUDITS</span><div id="audit-chips" style="display:inline-flex; flex-wrap:wrap;"></div></div>
    <div><span style="font-size:10px; font-weight:800; color:var(--slate); width:110px; display:inline-block;">VERIFICATIONS</span><div id="verif-chips" style="display:inline-flex; flex-wrap:wrap;"></div></div>
</div>

<main id="main-ui">
    <div id="card-zone" class="scroll-side"></div>
    <div class="sticky-side">
        <div id="magic-box" class="magic-score">
            <span id="prod-emoji" style="font-size: 40px; display: block; margin-bottom: 10px;">üê¢</span>
            <div id="prod-out" class="prod-val">0%</div>
            <span id="caption-out" style="font-weight:800; font-size:11px; margin-top:10px; display:block;">READY</span>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
            <div style="background:var(--card); padding:8px; border-radius:15px; border:1px solid var(--border); text-align:center;"><label style="font-size:9px; font-weight:800; color:var(--slate);">SHIFT</label><input type="number" min="0" onkeydown="return isPos(event)" id="s-in" value="8" oninput="updateBase()" style="width:100%; border:none; font-size:18px; font-weight:800; text-align:center; outline:none; background:transparent; color:var(--text);"></div>
            <div style="background:var(--card); padding:8px; border-radius:15px; border:1px solid var(--border); text-align:center;"><label style="font-size:9px; font-weight:800; color:var(--slate);">NPH</label><input type="number" min="0" onkeydown="return isPos(event)" id="n-in" value="0" oninput="updateBase()" style="width:100%; border:none; font-size:18px; font-weight:800; text-align:center; outline:none; background:transparent; color:var(--text);"></div>
        </div>
        <button class="btn-mini" onclick="clearDay()" style="width:100%; margin-top:10px;">RESET DAY</button>
    </div>
</main>

<div id="summary-ui" class="hidden">
    <div class="summary-top">
        <div class="st-container">
            <h2 id="summary-title" style="font-weight: 900; font-size: 24px; margin-bottom: 15px; color: var(--amz);"></h2>
            <table class="st"><thead id="st-head"></thead><tbody id="sum-body"></tbody></table>
        </div>
        <div style="width: 350px;">
            <div id="week-magic-box" class="magic-score" style="border: 2px solid var(--amz); background: var(--card);">
                <span id="week-emoji" style="font-size: 50px; display: block; margin-bottom: 15px;">‚ú®</span>
                <div id="week-prod-out" class="prod-val">0%</div>
                <span id="week-caption-out" style="font-weight:800; font-size:12px; margin-top:15px; display:block;">WEEKLY AGGREGATE</span>
            </div>
            <div style="margin-top:15px; background:var(--card); padding:15px; border-radius:20px; border:1px solid var(--border); text-align:center;">
                <label style="font-size:10px; font-weight:800; color:var(--amz);">RAMP MULTIPLIER (e.g. 1.2)</label>
                <input type="number" min="0" onkeydown="return isPos(event)" id="ramp-val" value="1" step="0.1" oninput="renderSummary()" style="width:100%; border:none; font-size:24px; font-weight:900; text-align:center; outline:none; background:transparent; color:var(--text);">
            </div>
            <button class="btn-mini" onclick="resetAll()" style="width:100%; margin-top:15px; padding:10px;">PURGE ALL DATA</button>
            <br><br>
            <button onclick="downloadTextReport()" style="background:transparent; color:#007185; border:1px solid #007185; padding:10px; border-radius:12px; cursor:pointer; width:100%; font-weight:bold; font-size:13px; text-transform:uppercase; letter-spacing:0.5px; transition:0.3s;">Download Weekly Report</button>
        </div>
    </div>
</div>

<script>
    const CONFIG = {
        audits: { "LE Validation": { "BV":80, "Invalid":61, "Valid":78, "Plausible":148 }, "Barcode Audit": { "Audits":310 }, "BLMA Audit": { "Audits":2400 }, "3P Clean up": { "Bulk":2613, "BI Unsup":1500, "BI Normal":1200, "Addl Brands":100, "Bulk GTIN":3213, "3p Tickets":1919 }, "Anchor Appeals": { "Out Scope":209, "Inconsistent":372, "Inscope":510, "IKS Update":627, "Addl Curation":58 }, "RCA Audit": { "Audit":600 }, "FCR Audit": { "Valid Conf":10, "False Conf":52 }, "ASIN Probate": { "Proof Val":570.62, "Ex Granted":570.62 }, "KPEX": { "Tickets":812 }, "KPEX Bulk TT": { "Tickets":2063 }, "UPCX Tickets": { "Audits":424 }, "GTIN Tickets": { "Approval":146, "RP":21, "Count":560 } },
        verif: { "Brand Curation": { "V-BV":46 }, "BLMA Verif": { "V-BLMA":46 }, "GTIN Verif": { "Approval":146, "RP":21, "Count":560 }, "Anchor Appeal": { "V-Out Scope":328 }, "3p Clean up": { "V-3p":1919 }, "Barcode Verif": { "V-Barcode":328 }, "UPCX Access": { "V-UPCX":180 }, "CRB Verif": { "V-CRB":46 }, "ASIN Probate Verif": { "V-Probate":328 }, "KPEX Verif": { "V-KPEX":328 } }
    };

    function isPos(e) { if(['-','e','+'].includes(e.key)) e.preventDefault(); }

    const AudioCtx = window.AudioContext || window.webkitAudioContext;
    const ctx = new AudioCtx();
    function playSound(type) {
        if(ctx.state === 'suspended') ctx.resume();
        const osc = ctx.createOscillator(); const gain = ctx.createGain();
        osc.connect(gain); gain.connect(ctx.destination);
        if(type === 'pop') { osc.frequency.setValueAtTime(600, ctx.currentTime); osc.frequency.exponentialRampToValueAtTime(100, ctx.currentTime + 0.1); gain.gain.setValueAtTime(0.1, ctx.currentTime); gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.1); }
        else if(type === 'success') { osc.type = 'triangle'; osc.frequency.setValueAtTime(400, ctx.currentTime); osc.frequency.exponentialRampToValueAtTime(1200, ctx.currentTime + 0.5); gain.gain.setValueAtTime(0.1, ctx.currentTime); gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.5); }
        else if(type === 'tick') { osc.type = 'square'; osc.frequency.setValueAtTime(150, ctx.currentTime); gain.gain.setValueAtTime(0.05, ctx.currentTime); gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.05); }
        osc.start(); osc.stop(ctx.currentTime + 0.5);
    }

    let state = JSON.parse(localStorage.getItem('ops_vFinal_v4')) || { owner: '', day: 'Mon', darkMode: false, lastProd: 0, active: { Mon:[], Tue:[], Wed:[], Thu:[], Fri:[] }, data: { Mon:{}, Tue:{}, Wed:{}, Thu:{}, Fri:{} }, hours: { Mon:{s:8, n:0}, Tue:{s:8, n:0}, Wed:{s:8, n:0}, Thu:{s:8, n:0}, Fri:{s:8, n:0} } };

    function toggleDark() { playSound('pop'); state.darkMode = !state.darkMode; applyTheme(); save(); }
    function applyTheme() { document.body.classList.toggle('dark-mode', state.darkMode); }
    function setName() { const n = document.getElementById('user-name-in').value.trim(); if(n) { state.owner = n.charAt(0).toUpperCase() + n.slice(1).toLowerCase(); init(); showCrazyPop(); } }
    function showCrazyPop() { playSound('success'); const p = document.getElementById('crazy-pop'); document.getElementById('pop-title').innerText = `HELLO, ${state.owner.toUpperCase()}!`; p.style.display = 'flex'; setTimeout(() => p.style.display = 'none', 3000); }

    /* --- START PASTE HERE --- */
    const principles = [
        "Customer Obsession", "Ownership", "Invent and Simplify", 
        "Are Right, A Lot", "Learn and Be Curious", "Hire and Develop the Best", 
        "Insist on the Highest Standards", "Think Big", "Bias for Action", 
        "Frugality", "Earn Trust", "Dive Deep", "Have Backbone; Disagree and Commit", 
        "Deliver Results", "Strive to be Earth‚Äôs Best Employer", "Success and Scale Bring Broad Responsibility"
    ];

    function init() {
        if(!state.owner) return;
        document.getElementById('name-gate').classList.add('hidden');
        applyTheme(); 

        // Randomly selects a principle every time the page loads
        const randomPrinciple = principles[Math.floor(Math.random() * principles.length)];
        
        // Sets the Top Left logo area to: üéØ Principle √ó Name
        document.getElementById('main-logo').innerHTML = `{randomPrinciple} √ó <span style="color:var(--amz)">${state.owner}</span>`;
        
        const tabs = document.getElementById('day-tabs'); tabs.innerHTML = '';
        ['Mon','Tue','Wed','Thu','Fri','Weekly Scope'].forEach(d => {
            const b = document.createElement('button'); b.className = `tab ${state.day === d ? 'active' : ''}`; b.innerText = d; 
            b.onclick = () => { playSound('pop'); state.day = d; init(); }; tabs.appendChild(b);
        });
        render();
    }

    function render() {
        save();
        const isWeekly = state.day === 'Weekly Scope';
        document.getElementById('sel-area').classList.toggle('hidden', isWeekly);
        document.getElementById('main-ui').classList.toggle('hidden', isWeekly);
        document.getElementById('summary-ui').classList.toggle('hidden', !isWeekly);
        if(isWeekly) { document.getElementById('summary-title').innerText = `${state.owner}'s Performance Universe`; renderSummary(); }
        else {
            document.getElementById('s-in').value = state.hours[state.day].s; document.getElementById('n-in').value = state.hours[state.day].n;
            renderChips('audits', 'audit-chips', 'a-active'); renderChips('verif', 'verif-chips', 'v-active');
            renderCards(); calculate();
        }
    }

    function renderChips(cat, target, cls) {
        const div = document.getElementById(target); div.innerHTML = '';
        Object.keys(CONFIG[cat]).forEach(k => {
            const c = document.createElement('div'); c.className = `chip ${state.active[state.day].includes(k) ? cls : ''}`; c.innerText = k;
            c.onclick = () => { playSound('pop'); let list = state.active[state.day]; state.active[state.day] = list.includes(k) ? list.filter(i => i !== k) : [...list, k]; render(); };
            div.appendChild(c);
        });
    }

    function renderCards() {
        const zone = document.getElementById('card-zone'); zone.innerHTML = '';
        state.active[state.day].forEach(k => {
            const conf = CONFIG.audits[k] || CONFIG.verif[k];
            const card = document.createElement('div'); card.className = 'card';
            card.innerHTML = `<div class="card-h">${k}</div><div style="padding:12px">${Object.entries(conf).map(([t, a]) => `<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px"><label style="font-size:11px;font-weight:700;">${t}</label>
            <input type="number" min="0" onkeydown="return isPos(event)" value="${state.data[state.day][k+'_'+t] || ''}" oninput="playSound('tick');state.data[state.day]['${k+'_'+t}']=this.value;calculate()" style="width:70px;padding:6px;border-radius:10px;border:1px solid var(--border);text-align:center;font-weight:800;background:var(--bg);color:var(--text);outline:none;"></div>`).join('')}</div>`;
            zone.appendChild(card);
        });
    }

    function calculate() {
        let earned = 0; const h = state.hours[state.day]; const eff = (h.s - h.n);
        state.active[state.day].forEach(k => { const conf = CONFIG.audits[k] || CONFIG.verif[k]; Object.entries(conf).forEach(([t, a]) => earned += (state.data[state.day][k+'_'+t] || 0) * a); });
        const prod = eff > 0 ? Math.round(((earned/3600)/eff)*100) : 0;
        if(prod >= 100 && state.lastProd < 100) playSound('success');
        state.lastProd = prod; updateUI(prod, 'prod-out', 'caption-out', 'prod-emoji', 'magic-box');
    }

    function updateUI(prod, outId, capId, emoId, boxId) {
        const out = document.getElementById(outId); const cap = document.getElementById(capId);
        const emo = document.getElementById(emoId); const box = document.getElementById(boxId);
        out.innerText = prod + '%';
        const tiers = [{l:100,m:"GOD MODE!",e:"üöÄ"},{l:70,m:"High Velocity",e:"üî•"},{l:40,m:"Solid",e:"üí™"},{l:0,m:"Ready",e:"üîã"}];
        const t = tiers.find(x => prod >= x.l);
        out.style.color = prod >= 100 ? '#FF9900' : 'var(--text)';
        cap.innerText = t.m.toUpperCase(); emo.innerText = t.e;
        if(prod >= 100) { box.style.borderColor = '#FF9900'; confetti({particleCount:40, spread:50}); } else { box.style.borderColor = 'var(--border)'; }
    }

    function renderSummary() {
        const body = document.getElementById('sum-body'); const ramp = parseFloat(document.getElementById('ramp-val').value) || 1;
        document.getElementById('st-head').innerHTML = `<tr><th>PROCESS DETAIL</th><th>M</th><th>T</th><th>W</th><th>T</th><th>F</th><th style="color:var(--amz)">TOT</th></tr>`;
        body.innerHTML = ''; const tasks = new Set(); let wE = 0, wEff = 0;
        ['Mon','Tue','Wed','Thu','Fri'].forEach(d => {
            state.active[d].forEach(k => tasks.add(k)); wEff += Math.max(0, (state.hours[d].s - state.hours[d].n));
            state.active[d].forEach(k => { const conf = CONFIG.audits[k] || CONFIG.verif[k]; Object.entries(conf).forEach(([t, a]) => wE += (state.data[d][k+'_'+t] || 0) * a); });
        });
        tasks.forEach(k => {
            Object.keys(CONFIG.audits[k] || CONFIG.verif[k]).forEach(t => {
                let r = `<tr><td><b style="font-size:12px">${k}</b><br><small style="color:var(--slate)">${t}</small></td>`, tot = 0;
                ['Mon','Tue','Wed','Thu','Fri'].forEach(d => { let v = parseInt(state.data[d][k+'_'+t])||0; r+=`<td>${v||'-'}</td>`; tot+=v; });
                if(tot > 0) body.innerHTML += r + `<td style="font-weight:900;color:var(--amz);text-align:center;">${tot}</td></tr>`;
            });
        });
        const wProd = wEff > 0 ? Math.round((((wE * ramp)/3600)/wEff)*100) : 0;
        updateUI(wProd, 'week-prod-out', 'week-caption-out', 'week-emoji', 'week-magic-box');
    }

    function updateBase() { playSound('tick'); state.hours[state.day].s = document.getElementById('s-in').value; state.hours[state.day].n = document.getElementById('n-in').value; calculate(); }
    function clearDay() { if(confirm("Reset today?")) { state.data[state.day] = {}; state.active[state.day] = []; render(); } }
    function resetAll() { if(confirm("WIPE EVERYTHING?")) { localStorage.clear(); location.reload(); } }
    function save() { localStorage.setItem('ops_vFinal_v4', JSON.stringify(state)); }
    
    function downloadTextReport() {
        const s = JSON.parse(localStorage.getItem('ops_vFinal_v4'));
        if (!s || !s.owner) { alert("No data found!"); return; }
        let txt = "==========================================\n";
        txt += `   WEEKLY REPORT: ${s.owner.toUpperCase()}\n==========================================\n\n`;
        let gE = 0, gEff = 0;
        ['Mon','Tue','Wed','Thu','Fri'].forEach(d => {
            let dE = 0; const eff = s.hours[d].s - s.hours[d].n;
            txt += `--- ${d.toUpperCase()} (Hours: ${eff}) ---\n`;
            s.active[d].forEach(k => {
                Object.entries(CONFIG.audits[k] || CONFIG.verif[k]).forEach(([t, a]) => {
                    const v = parseInt(s.data[d][k+'_'+t]) || 0;
                    if(v > 0) { txt += `${k} (${t}): ${v}\n`; dE += (v * a); }
                });
            });
            txt += `Daily Prod: ${eff > 0 ? Math.round(((dE/3600)/eff)*100) : 0}%\n\n`;
            gE += dE; gEff += Math.max(0, eff);
        });
        txt += `==========================================\nWEEKLY SCORE: ${gEff > 0 ? Math.round(((gE/3600)/gEff)*100) : 0}%\n==========================================`;
        const blob = new Blob([txt], { type: 'text/plain' });
        const link = document.createElement("a"); link.href = URL.createObjectURL(blob);
        link.download = `${s.owner}_Report.txt`; link.click();
    }

    window.onload = () => { 
        if(state.owner) init(); 
        else document.getElementById('user-name-in').focus();
    };
</script>
</body>
</html>

